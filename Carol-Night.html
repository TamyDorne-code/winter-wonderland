<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Carol Night — Community Sing & Cocoa</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#071428; --panel:#f7fafc; --mint:#9adfbf; --muted:#9fb1c4;
  --card:#0b1720; --glass: rgba(255,255,255,0.04);
  --accent: linear-gradient(90deg,#aef0d6,#8bd9c1);
  --focus: 3px solid rgba(154,223,191,0.14);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Montserrat,system-ui,Arial;background:
  radial-gradient(circle at 10% 10%, rgba(154,223,191,0.03), transparent 8%),
  linear-gradient(180deg,#041021 0%, #071428 60%, #071024 100%);color:var(--panel);-webkit-font-smoothing:antialiased}
a{color:inherit}
.wrap{max-width:980px;margin:36px auto;padding:20px}
.sr-only{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:18px;padding:22px;border:1px solid rgba(255,255,255,0.04);
  box-shadow:0 24px 68px rgba(2,6,23,0.6);position:relative;overflow:hidden;
  transition:transform .22s ease,box-shadow .22s ease;
}
.card:focus-within{transform:translateY(-6px);box-shadow:0 34px 88px rgba(2,6,23,0.7)}
header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.title h1{margin:0;font-family:'Great Vibes',cursive;color:var(--mint);font-size:2.2rem;letter-spacing:0.6px}
.subtitle{color:var(--muted);font-weight:600}
.header-left{display:flex;align-items:center;gap:12px}
.back{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--panel);padding:8px 10px;border-radius:10px;font-weight:700;cursor:pointer}
.header-actions{display:flex;gap:8px;align-items:center}
.main{display:flex;gap:24px;margin-top:18px;flex-wrap:wrap;align-items:flex-start}
.poster{width:240px;min-width:140px;border-radius:12px;overflow:hidden;background:linear-gradient(180deg,#142026,#08141a);box-shadow:0 12px 36px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03)}
.poster img{width:100%;height:100%;display:block;object-fit:cover}
.meta{flex:1 1 360px;min-width:220px}
.pill{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);color:var(--panel);font-weight:600;margin-right:8px}
.synopsis{color:#d6e9e4;line-height:1.5;margin-top:12px;font-size:0.98rem}
.controls{display:flex;gap:12px;align-items:center;margin-top:14px;flex-wrap:wrap}
.btn{background:var(--accent);color:#082028;border:none;padding:10px 16px;border-radius:10px;font-weight:700;cursor:pointer;box-shadow:0 8px 18px rgba(154,223,191,0.08);display:inline-flex;align-items:center;gap:8px;transition:transform .12s ease}
.btn:active{transform:translateY(1px)}
.btn.secondary{background:transparent;color:var(--panel);border:1px solid rgba(255,255,255,0.06);box-shadow:none}
.btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,0.04)}
.countdown{margin-left:6px;color:#cfe9ff;background:rgba(255,255,255,0.01);padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
.details{margin-top:18px;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.03)}
.details.hidden{display:none}
.menu-toggle{display:none}
.mobile-menu-btn{display:none;background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--panel);padding:8px 10px;border-radius:10px;font-weight:700;cursor:pointer}
.mobile-menu{position:fixed;right:12px;bottom:14px;background:linear-gradient(180deg,#082028,#052026);border:1px solid rgba(255,255,255,0.04);padding:12px;border-radius:12px;box-shadow:0 22px 60px rgba(0,0,0,0.6);display:none;z-index:140;min-width:220px}
.mobile-menu.open{display:block}
.mobile-menu button{display:block;width:100%;margin:6px 0;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--panel);text-align:left;font-weight:600}
.rsvp-form{display:none;margin-top:12px;background:rgba(255,255,255,0.02);padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);max-width:460px}
.rsvp-form label{display:block;color:var(--panel);margin-bottom:6px;font-weight:600}
.rsvp-form input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);margin-bottom:10px;background:transparent;color:var(--panel)}
.remove-btn{background:linear-gradient(90deg,#68c9a6,#b5f1df);color:#042022;border:none;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
.rsvped{outline:var(--focus);box-shadow:0 36px 80px rgba(154,223,191,0.04)}
.footer{margin-top:18px;color:var(--muted);display:flex;justify-content:space-between;flex-wrap:wrap;gap:12px;font-size:0.95rem}
.snow{position:fixed;left:0;top:0;width:100vw;height:100vh;pointer-events:none;z-index:1;opacity:.9}
kbd{background:rgba(255,255,255,0.06);padding:2px 6px;border-radius:6px;font-size:0.85rem}
[tabindex]:focus,button:focus,input:focus{outline:none;box-shadow:var(--focus);border-radius:8px}
a.icon-btn{display:inline-flex;align-items:center;gap:8px}

/* responsive */
@media (max-width:820px){
  .main{flex-direction:column;align-items:center}
  header{align-items:flex-start}
  .details{display:none}
  .menu-toggle{display:inline-flex}
  .poster{width:180px}
  .card{padding:16px;border-radius:14px}
  .mobile-menu-btn{display:inline-flex}
}
</style>
</head>
<body>
<a class="sr-only" href="#mainContent">Skip to content</a>

<canvas class="snow" aria-hidden="true"></canvas>

<div class="wrap">
  <div class="card" role="main" aria-labelledby="pageTitle">
    <header>
      <div class="header-left">
        <button id="backBtn" class="back" aria-label="Go back">← Back</button>
        <div class="title">
          <h1 id="pageTitle" tabindex="0">Carol Night</h1>
          <div class="subtitle">Community sing-along & hot cocoa</div>
        </div>
      </div>

      <div class="header-actions" aria-hidden="false">
        <button id="menuToggle" class="btn secondary menu-toggle" aria-controls="details" aria-expanded="false" aria-label="Toggle event details">Show Details</button>
        <button id="mobileMenuBtn" class="mobile-menu-btn" aria-expanded="false" aria-controls="mobileMenu" aria-haspopup="true" aria-label="Open mobile menu">☰ Menu</button>
      </div>
    </header>

    <main id="mainContent" class="main">
      <div class="poster" aria-hidden="false">
        <img src="https://thumbs.dreamstime.com/b/christmas-carolers-sing-under-majestic-tree-choir-dressed-red-green-performing-carols-front-large-chaos-ar-quality-341299131.jpg" alt="Singers around a tree" />
      </div>

      <div class="meta">
        <div>
          <span class="pill">Dec 20 • 7:00 PM</span>
          <span class="pill">Town Square</span>
          <span class="pill">All ages</span>
        </div>

        <p class="synopsis" id="synopsis">
          Join neighbors for a cozy evening of carols, community singing, and hot cocoa. Songbooks provided. Bring a warm blanket and invite friends.
        </p>

        <div class="controls" id="controls" role="region" aria-label="Event controls">
          <button id="rsvpBtn" class="btn" data-event="Carol Night" aria-label="Open RSVP form">RSVP</button>
          <div id="countdown" class="countdown" data-date="2025-12-20T19:00:00" aria-live="polite">Loading...</div>

          <div id="qrWrap" style="display:none;margin-left:12px;align-items:center" aria-hidden="true">
            <img id="qrImg" alt="Ticket QR code" style="width:120px;height:120px;border-radius:8px;background:#fff;padding:6px;display:block">
            <div style="margin-top:6px;display:flex;gap:8px;justify-content:center">
              <button id="downloadQr" class="btn secondary" aria-label="Download QR code">Download QR</button>
            </div>
          </div>
        </div>

        <form id="rsvpForm" class="rsvp-form" aria-hidden="true" aria-labelledby="rsvpLegend" role="form">
          <div id="rsvpLegend" class="sr-only">RSVP form</div>
          <label>Name <input type="text" name="name" required aria-required="true"></label>
          <label>Email <input type="email" name="email" aria-describedby="emailHelp"></label>
          <div id="emailHelp" class="sr-only">We will only use your email for event updates.</div>
          <label>Guests <input type="number" name="guests" min="0" value="0"></label>

          <div style="display:flex;gap:8px;align-items:center">
            <button type="submit" class="btn">Submit RSVP</button>
            <button type="button" id="cancelRSVP" class="btn secondary">Cancel</button>
            <button type="button" id="downloadTicket" class="btn secondary" style="display:none">Download Ticket</button>
          </div>
          <div id="rsvpSuccess" role="status" style="color:#7bd389;font-weight:700;margin-top:8px" aria-live="polite"></div>
        </form>
      </div>
    </main>

    <section id="details" class="details" aria-hidden="false">
      <h2 style="margin-top:0;color:var(--mint);font-family:'Great Vibes',cursive">Event Details</h2>
      <p style="color:#d6e9e4">Outdoor community carols with live accompaniment. Please bring a warm coat; blankets recommended. Hot cocoa and cookies available. Accessible seating near the stage.</p>
      <ul style="color:#cfe9ff;line-height:1.6">
        <li>Free entry; donations welcome</li>
        <li>Accessible stage & seating area</li>
        <li>Songbooks supplied; kids welcome</li>
      </ul>
    </section>

    <footer class="footer">
      <div>Location: <strong style="color:var(--mint)">Town Square</strong></div>
      <div style="color:var(--muted)">&copy; <span id="yearCarol"></span> Carol Night Committee</div>
    </footer>
  </div>
</div>

<!-- Accessible mobile menu (dialog-like) -->
<nav id="mobileMenu" class="mobile-menu" aria-hidden="true" role="dialog" aria-label="Mobile menu">
  <div role="none">
    <button id="mobileDetailsBtn">Toggle Details</button>
    <button id="mobileRsvpBtn">Open RSVP</button>
    <button id="mobileDownloadQrBtn">Download QR</button>
    <button id="mobileCloseBtn" aria-label="Close menu">Close</button>
  </div>
</nav>

<script>
/* snowfall canvas (light) */
(function(){
  const canvas = document.querySelector('.snow');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let flakes = [];
  function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; create(); }
  function create(){ flakes=[]; const count = Math.max(24, Math.round((innerWidth*innerHeight)/120000)); for(let i=0;i<count;i++) flakes.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*2+0.6,s:Math.random()*1+0.2}); }
  function draw(){ ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle="rgba(255,255,255,0.9)"; for(const f of flakes){ ctx.beginPath(); ctx.arc(f.x,f.y,f.r,0,Math.PI*2); ctx.fill(); f.y += f.s + Math.sin(f.x/40)*0.2; if(f.y>canvas.height){ f.y=-10; f.x=Math.random()*canvas.width; } } requestAnimationFrame(draw); }
  addEventListener('resize',resize);
  resize(); draw();
})();

/* countdown (aria-live) */
(function(){
  const el = document.getElementById('countdown');
  if(!el) return;
  function update(){
    const date = new Date(el.dataset.date);
    const now = new Date();
    const diff = date - now;
    if(diff <= 0){ el.textContent = "Event started!"; return; }
    const d = Math.floor(diff/(1000*60*60*24));
    const h = Math.floor((diff/(1000*60*60))%24);
    const m = Math.floor((diff/(1000*60))%60);
    const s = Math.floor((diff/1000)%60);
    el.textContent = `Starts in ${d}d ${h}h ${m}m ${s}s`;
  }
  update(); setInterval(update,1000);
})();

/* details toggle with accessibility */
(function(){
  const menuToggle = document.getElementById('menuToggle');
  const details = document.getElementById('details');
  const threshold = 820;
  function applyInitial(){
    const isMobile = window.innerWidth <= threshold;
    if(isMobile){
      details.classList.add('hidden');
      details.setAttribute('aria-hidden','true');
      if(menuToggle){ menuToggle.style.display='inline-flex'; menuToggle.setAttribute('aria-expanded','false'); menuToggle.textContent='Show Details'; }
    } else {
      details.classList.remove('hidden');
      details.setAttribute('aria-hidden','false');
      if(menuToggle){ menuToggle.style.display='none'; menuToggle.setAttribute('aria-expanded','true'); }
    }
  }
  applyInitial();
  window.addEventListener('resize', applyInitial);

  if(menuToggle){
    menuToggle.addEventListener('click', function(){
      const hidden = details.classList.toggle('hidden');
      details.setAttribute('aria-hidden', hidden ? 'true' : 'false');
      menuToggle.setAttribute('aria-expanded', hidden ? 'false' : 'true');
      menuToggle.textContent = hidden ? 'Show Details' : 'Hide Details';
      if(!hidden) details.querySelector('h2')?.focus();
    });
    // keyboard activation
    menuToggle.addEventListener('keydown', function(e){
      if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this.click(); }
    });
  }
})();

/* mobile menu with focus-trap & keyboard */
(function(){
  const mobileMenuBtn = document.getElementById('mobileMenuBtn');
  const mobileMenu = document.getElementById('mobileMenu');
  const mobileDetailsBtn = document.getElementById('mobileDetailsBtn');
  const mobileRsvpBtn = document.getElementById('mobileRsvpBtn');
  const mobileDownloadQrBtn = document.getElementById('mobileDownloadQrBtn');
  const mobileCloseBtn = document.getElementById('mobileCloseBtn');
  const details = document.getElementById('details');
  const rsvpBtn = document.getElementById('rsvpBtn');
  const downloadQr = document.getElementById('downloadQr');

  if(!mobileMenuBtn || !mobileMenu) return;

  const focusableSelector = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
  let lastFocused = null;

  function openMenu(){
    lastFocused = document.activeElement;
    mobileMenu.classList.add('open');
    mobileMenu.setAttribute('aria-hidden','false');
    mobileMenuBtn.setAttribute('aria-expanded','true');
    mobileCloseBtn.focus();
    document.body.style.overflow = 'hidden';
    trapFocus();
  }
  function closeMenu(){
    mobileMenu.classList.remove('open');
    mobileMenu.setAttribute('aria-hidden','true');
    mobileMenuBtn.setAttribute('aria-expanded','false');
    document.body.style.overflow = '';
    if(lastFocused) lastFocused.focus();
  }

  mobileMenuBtn.addEventListener('click', function(){
    mobileMenu.classList.contains('open') ? closeMenu() : openMenu();
  });

  mobileCloseBtn?.addEventListener('click', closeMenu);

  mobileDetailsBtn?.addEventListener('click', function(){
    const hidden = details.classList.toggle('hidden');
    details.setAttribute('aria-hidden', hidden ? 'true' : 'false');
    // sync desktop toggle if present
    const mt = document.getElementById('menuToggle');
    if(mt) mt.textContent = hidden ? 'Show Details' : 'Hide Details';
    closeMenu();
  });

  mobileRsvpBtn?.addEventListener('click', function(){ rsvpBtn.click(); closeMenu(); });

  mobileDownloadQrBtn?.addEventListener('click', function(){ if(downloadQr) downloadQr.click(); else alert('QR not ready'); closeMenu(); });

  // close on Escape
  document.addEventListener('keydown', function(e){
    if(e.key === 'Escape' && mobileMenu.classList.contains('open')) closeMenu();
  });

  // close when tapping outside
  document.addEventListener('click', function(e){
    if(mobileMenu.classList.contains('open') && !mobileMenu.contains(e.target) && !mobileMenuBtn.contains(e.target)) closeMenu();
  });

  // simple focus trap
  function trapFocus(){
    const focusable = Array.from(mobileMenu.querySelectorAll(focusableSelector)).filter(n=>!n.disabled);
    if(!focusable.length) return;
    const first = focusable[0];
    const last = focusable[focusable.length-1];
    mobileMenu.addEventListener('keydown', function trap(e){
      if(e.key !== 'Tab') return;
      if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
    }, { once: true });
  }
})();

/* RSVP + ticket + QR logic with accessibility */
(function(){
  const EVENT_KEY = 'Carol Night';
  const STORAGE_KEY = 'winter_rsvps';
  const rsvpBtn = document.getElementById('rsvpBtn');
  const rsvpForm = document.getElementById('rsvpForm');
  const controls = document.getElementById('controls');
  const successEl = document.getElementById('rsvpSuccess');
  const cancelBtn = document.getElementById('cancelRSVP');
  const downloadTicketBtn = document.getElementById('downloadTicket');
  const card = document.querySelector('.card');
  const backBtn = document.getElementById('backBtn');

  const qrWrap = document.getElementById('qrWrap');
  const qrImg = document.getElementById('qrImg');
  const downloadQrBtn = document.getElementById('downloadQr');
  let lastQrApi = '';

  const EVENT_INFO = {
    venue: 'Town Square',
    address: '456 Elm St, Yourtown',
    contact: 'carol@community.local',
    instructions: 'Arrive early for best spots. Songbooks provided. Hot cocoa stand near the stage.'
  };

  function store(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)||'{}'); }catch{return {}} }
  function save(s){ localStorage.setItem(STORAGE_KEY, JSON.stringify(s)); }

  function makeTicketId(){ return 'CAROL-' + Date.now().toString(36).slice(-8).toUpperCase(); }
  function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

  function buildTicketHtml(entry){
    const now = new Date().toLocaleString();
    return `<!doctype html><html><head><meta charset="utf-8"><title>Ticket — ${escapeHtml(entry.name)}</title><style>body{font-family:Arial;padding:18px;color:#041524}.ticket{border:1px solid #ddd;padding:16px;border-radius:8px}</style></head><body><div class="ticket"><h2>Carol Night</h2><div><strong>Ticket ID:</strong> ${escapeHtml(entry.id)}</div><div><strong>Name:</strong> ${escapeHtml(entry.name)}</div><div><strong>Guests:</strong> ${escapeHtml(entry.guests||0)}</div><div><strong>Venue:</strong> ${escapeHtml(EVENT_INFO.venue)}</div><div style="margin-top:8px;color:#666;font-size:.9rem">Generated: ${escapeHtml(now)}</div></div></body></html>`;
  }

  function generateQrFor(entry){
    const payload = {
      event: EVENT_KEY,
      ticketId: entry.id || makeTicketId(),
      name: entry.name,
      email: entry.email || '',
      guests: entry.guests || 0,
      time: entry.time,
      venue: EVENT_INFO.venue,
      address: EVENT_INFO.address,
      contact: EVENT_INFO.contact,
      instructions: EVENT_INFO.instructions,
      maps: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(EVENT_INFO.address)}`
    };
    if(!entry.id){ const st=store(); st[EVENT_KEY]=Object.assign({}, entry, { id: payload.ticketId }); save(st); entry.id=payload.ticketId; }
    lastQrApi = 'https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=' + encodeURIComponent(JSON.stringify(payload));
    qrImg.src = lastQrApi;
    if(qrWrap){ qrWrap.style.display = 'flex'; qrWrap.setAttribute('aria-hidden','false'); }
  }

  function render(){
    const s = store();
    const has = !!s[EVENT_KEY];
    if(has){
      rsvpBtn.style.display = 'none';
      if(!controls.querySelector('.remove-btn')){
        const rem = document.createElement('button');
        rem.className = 'remove-btn';
        rem.textContent = 'Remove RSVP';
        rem.addEventListener('click', function(){
          if(!confirm('Remove your RSVP?')) return;
          const st = store(); delete st[EVENT_KEY]; save(st); render(); alert('RSVP removed.');
        });
        controls.insertBefore(rem, document.getElementById('countdown'));
      }
      card.classList.add('rsvped');
      downloadTicketBtn.style.display = 'inline-flex';
      const entry = s[EVENT_KEY];
      if(entry) generateQrFor(entry);
    } else {
      rsvpBtn.style.display = 'inline-flex';
      const rem = controls.querySelector('.remove-btn');
      if(rem) rem.remove();
      card.classList.remove('rsvped');
      downloadTicketBtn.style.display = 'none';
      if(qrWrap){ qrWrap.style.display = 'none'; qrWrap.setAttribute('aria-hidden','true'); }
      lastQrApi = '';
    }
    if(rsvpForm){ rsvpForm.style.display = 'none'; rsvpForm.setAttribute('aria-hidden','true'); }
    successEl.textContent = '';
  }

  // open form and focus first input
  rsvpBtn.addEventListener('click', function(){
    rsvpForm.style.display = 'block'; rsvpForm.setAttribute('aria-hidden','false');
    const nameInput = rsvpForm.querySelector('input[name="name"]');
    if(nameInput) nameInput.focus();
  });

  cancelBtn.addEventListener('click', function(){ rsvpForm.style.display='none'; rsvpForm.setAttribute('aria-hidden','true'); rsvpBtn.focus(); });

  rsvpForm.addEventListener('submit', function(e){
    e.preventDefault();
    const name = rsvpForm.querySelector('input[name="name"]').value.trim();
    const email = rsvpForm.querySelector('input[name="email"]').value.trim();
    const guests = Number(rsvpForm.querySelector('input[name="guests"]').value || 0);
    if(!name){ alert('Please enter your name.'); rsvpForm.querySelector('input[name="name"]').focus(); return; }
    const entry = { id: makeTicketId(), name, email, guests, time: new Date().toISOString() };
    const st = store(); st[EVENT_KEY] = entry; save(st);
    successEl.textContent = 'RSVP saved.';
    setTimeout(()=>{ render(); alert('Thanks — RSVP recorded.'); }, 500);
  });

  downloadTicketBtn.addEventListener('click', function(){
    const st = store(); const entry = st[EVENT_KEY];
    if(!entry){ alert('No RSVP found'); return; }
    const html = buildTicketHtml(entry);
    const blob = new Blob([html], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = `carol-ticket-${(entry.id||entry.name).replace(/\s+/g,'_')}.html`; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });

  downloadQrBtn.addEventListener('click', async function(){
    if(!lastQrApi){ alert('QR not ready'); return; }
    try{
      const resp = await fetch(lastQrApi);
      if(!resp.ok) throw new Error('QR fetch failed');
      const blob = await resp.blob();
      const u = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = u;
      const st = store(); const entry = st[EVENT_KEY] || { id: 'ticket' };
      a.download = `carol-qr-${(entry.id||'ticket')}.png`;
      document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(u);
    }catch(err){
      console.warn(err);
      alert('Unable to download QR. Right-click the image and save it instead.');
    }
  });

  backBtn.addEventListener('click', function(){ if(window.history.length>1) window.history.back(); else window.location.href='/'; });

  render();
})();

/* footer year */
document.getElementById('yearCarol').textContent = new Date().getFullYear();
</script>
</body>
</html>