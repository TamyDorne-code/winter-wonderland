<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Winter Wonderland Events</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-start:#060814;
      --bg-end:#081224; /* subtler bottom tone */
      --panel:#fbfbfd;
      --muted:#9fb5cc;
      --accent:#cfb76b;
      --card-bg: rgba(255,255,255,0.02);
      --glass: rgba(255,255,255,0.04);
    }

    html,body{height:100%;margin:0;font-family:Montserrat,system-ui,Arial;background:
      radial-gradient(1200px 400px at 10% 10%, rgba(12,36,56,0.16), transparent 8%),
      linear-gradient(180deg,var(--bg-start),var(--bg-end));color:var(--panel);-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}

    .container{
      max-width:980px;margin:44px auto;padding:44px;border-radius:20px;
      background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.006));
      box-shadow: 0 18px 60px rgba(2,7,18,0.7); border:1px solid rgba(255,255,255,0.02);
      backdrop-filter: blur(6px);
    }

    header{display:flex;justify-content:space-between;align-items:center;gap:12px}
    h1{font-family:'Great Vibes',cursive;color:var(--accent);font-size:2.8rem;margin:0;letter-spacing:0.6px}
    .subtitle{color:var(--muted);font-weight:600;font-size:0.98rem}

    .intro{margin-top:12px;color:#dbeffb;padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.02);background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00))}

    .event-list{list-style:none;padding:0;margin:20px 0 0 0;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .event-card{
      padding:14px;border-radius:12px;background:var(--card-bg);border:1px solid rgba(255,255,255,0.02);
      box-shadow: 0 8px 28px rgba(0,0,0,0.45);transition:transform .13s,box-shadow .13s;
    }
    .event-card:hover{transform:translateY(-6px);box-shadow:0 22px 48px rgba(0,0,0,0.55)}
    .event-link{font-weight:700;color:var(--panel);text-decoration:none;display:block}
    .event-date{font-family:'Great Vibes',cursive;color:var(--muted);display:block;margin-top:6px;font-size:0.95rem}

    .meta-row{display:flex;gap:8px;align-items:center;margin-top:12px;flex-wrap:wrap}
    .pill{background:rgba(255,255,255,0.02);padding:6px 10px;border-radius:999px;font-weight:600;color:var(--muted);font-size:0.9rem}
    .countdown{color:#dff3ff;padding:6px 10px;border-radius:10px;background:rgba(255,255,255,0.01);font-weight:700;font-size:0.88rem}

    .controls{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
    .rsvp-btn{background:linear-gradient(90deg,#123c55,#376b9a);color:#fff;padding:8px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
    .remove-btn{background:linear-gradient(90deg,#a67bb5,#7a5fb0);color:#fff;padding:8px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:700;display:none}

    .event-locations-link{color:var(--muted);text-decoration:underline;font-size:0.92rem}

    .music-player{position:fixed;right:18px;bottom:18px;background:rgba(255,255,255,0.02);padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:flex;gap:10px;align-items:center;z-index:80}
    .music-player button{background:linear-gradient(90deg,#1b4b69,#3f7096);color:#fff;border:none;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700}

    .snowfall{position:fixed;inset:0;pointer-events:none;z-index:1}
    .snowflake-anim{position:fixed;top:-10vh;opacity:0.6;font-size:0.9rem;filter:drop-shadow(0 6px 14px rgba(0,0,0,0.5));}

    .footer{margin-top:22px;color:var(--muted);font-size:0.95rem;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}

    a:focus,button:focus{outline:3px solid rgba(207,183,107,0.12);outline-offset:3px}

    @media (max-width:720px){
      .container{padding:22px}
      .music-player{right:12px;bottom:12px;padding:8px}
    }
  </style>
</head>
<body>
  <div class="snowfall" aria-hidden="true"></div>

  <div class="container" role="main" aria-label="Winter Wonderland">
    <header>
      <div>
        <h1 tabindex="0">Winter Wonderland</h1>
        <div class="subtitle">Festive events & community celebrations</div>
      </div>
      <div style="text-align:right">
        <div style="color:#d6e9ff;font-weight:700">Main locations: Winter Wonderland Hall ‚Ä¢ Main Plaza ‚Ä¢ Community Kitchen</div>
        <div style="color:var(--muted);font-size:.92rem;margin-top:6px">Accessible venues ‚Ä¢ Parking nearby</div>
      </div>
    </header>

    <div class="intro" tabindex="0">
      Season schedule ‚Äî RSVP for events you plan to attend. Click "Event Locations" to view where each event takes place.
    </div>

    <ul class="event-list" id="eventList">
      <li class="event-card">
        <a class="event-link" href="Holiday-Movie-Night.html">üé¨ Holiday Movie Night
          <span class="event-date">December 1 & December 2</span>
        </a>
        <div class="meta-row">
          <span class="pill">Community Hall</span>
          <a class="event-locations-link" href="Event-location.html#community-hall">Location</a>
          <div class="countdown" data-date="2025-12-01T18:00:00">Loading...</div>
        </div>
        <div class="controls">
          <button class="rsvp-btn" data-event="Holiday Movie Night">RSVP</button>
          <button class="remove-btn">Remove RSVP</button>
        </div>
      </li>

      <li class="event-card">
        <a class="event-link" href="Ice-Skating.html">‚õ∏ Ice Skating
          <span class="event-date">December 5 ‚Äì December 15</span>
        </a>
        <div class="meta-row">
          <span class="pill">Outdoor Rink</span>
          <a class="event-locations-link" href="Event-location.html#outdoor-rink">Location</a>
          <div class="countdown" data-date="2025-12-05T10:00:00">Loading...</div>
        </div>
        <div class="controls">
          <button class="rsvp-btn" data-event="Ice Skating">RSVP</button>
          <button class="remove-btn">Remove RSVP</button>
        </div>
      </li>

      <li class="event-card">
        <a class="event-link" href="Christmas-event.html">üéÑ Christmas Season Celebration
          <span class="event-date">December 20 ‚Äì December 31</span>
        </a>
        <div class="meta-row">
          <span class="pill">Winter Hall</span>
          <a class="event-locations-link" href="Event-location.html#winter-hall">Location</a>
          <div class="countdown" data-date="2025-12-20T17:00:00">Loading...</div>
        </div>
        <div class="controls">
          <button class="rsvp-btn" data-event="Christmas Season Celebration">RSVP</button>
          <button class="remove-btn">Remove RSVP</button>
        </div>
      </li>

      <li class="event-card">
        <a class="event-link" href="Santa-Visit.html">üéÖ Santa Visit
          <span class="event-date">December 12 ‚Ä¢ 10:00 AM</span>
        </a>
        <div class="meta-row">
          <span class="pill">Main Plaza</span>
          <a class="event-locations-link" href="Event-location.html#main-plaza">Location</a>
          <div class="countdown" data-date="2025-12-12T10:00:00">Loading...</div>
        </div>
        <div class="controls">
          <button class="rsvp-btn" data-event="Santa Visit">RSVP</button>
          <button class="remove-btn">Remove RSVP</button>
        </div>
      </li>

      <li class="event-card">
        <a class="event-link" href="Santa-Workshop.html">üß∞ Santa Workshop
          <span class="event-date">December 14 ‚Ä¢ 11:00 AM</span>
        </a>
        <div class="meta-row">
          <span class="pill">Community Hall ‚Äî Workshop Room</span>
          <a class="event-locations-link" href="Event-location.html#community-hall">Location</a>
          <div class="countdown" data-date="2025-12-14T11:00:00">Loading...</div>
        </div>
        <div class="controls">
          <button class="rsvp-btn" data-event="Santa Workshop">RSVP</button>
          <button class="remove-btn">Remove RSVP</button>
        </div>
      </li>

      <li class="event-card">
        <a class="event-link" href="Cookie-Decorating.html">üç™ Cookie Decorating
          <span class="event-date">December 10 ‚Ä¢ 2:00 PM</span>
        </a>
        <div class="meta-row">
          <span class="pill">Community Kitchen</span>
          <a class="event-locations-link" href="Event-location.html#community-kitchen">Location</a>
          <div class="countdown" data-date="2025-12-10T14:00:00">Loading...</div>
        </div>
        <div class="controls">
          <button class="rsvp-btn" data-event="Cookie Decorating">RSVP</button>
          <button class="remove-btn">Remove RSVP</button>
        </div>
      </li>

      <li class="event-card">
        <a class="event-link" href="Gift-Exchange.html">üéÅ Gift Exchange
          <span class="event-date">December 18 ‚Ä¢ 5:00 PM</span>
        </a>
        <div class="meta-row">
          <span class="pill">Community Hall</span>
          <a class="event-locations-link" href="Event-location.html#community-hall">Location</a>
          <div class="countdown" data-date="2025-12-18T17:00:00">Loading...</div>
        </div>
        <div class="controls">
          <button class="rsvp-btn" data-event="Gift Exchange">RSVP</button>
          <button class="remove-btn">Remove RSVP</button>
        </div>
      </li>

      <li class="event-card">
        <a class="event-link" href="Carol-Night.html">üé∂ Carol Night
          <span class="event-date">December 22 ‚Ä¢ 6:00 PM</span>
        </a>
        <div class="meta-row">
          <span class="pill">Town Square</span>
          <a class="event-locations-link" href="Event-location.html#town-square">Location</a>
          <div class="countdown" data-date="2025-12-22T18:00:00">Loading...</div>
        </div>
        <div class="controls">
          <button class="rsvp-btn" data-event="Carol Night">RSVP</button>
          <button class="remove-btn">Remove RSVP</button>
        </div>
      </li>

      <li class="event-card">
        <a class="event-link" href="New-Years-Eve.html">‚ú® New Year's Eve Ball
          <span class="event-date">December 31 ‚Ä¢ 9:00 PM</span>
        </a>
        <div class="meta-row">
          <span class="pill">Grand Hall</span>
          <a class="event-locations-link" href="Event-location.html#grand-hall">Location</a>
          <div class="countdown" data-date="2025-12-31T21:00:00">Loading...</div>
        </div>
        <div class="controls">
          <button class="rsvp-btn" data-event="New Years Eve Ball">RSVP</button>
          <button class="remove-btn">Remove RSVP</button>
        </div>
      </li>

      <li class="event-card">
        <a class="event-link" href="Event-location.html"> üìç Event Locations
          <span class="event-date">Various</span>
        </a>
      </li>
    </ul>

    <div class="footer">
      <div>Brought to you by Winter Wonderland Committee ‚Äî <span id="footer-year"></span></div>
      <div><a href="mailto:winter@wonderland.com" style="color:var(--muted);text-decoration:none">winter@wonderland.com</a></div>
    </div>
  </div>

  <div class="music-player" aria-label="Background music player">
    <span style="font-weight:700">Winter Melody</span>
    <button id="musicToggle" aria-pressed="false" aria-label="Play winter melody">‚ñ∂ Play</button>
    <audio id="bgMusic" loop preload="none" playsinline>
      <source src="winter-melody.mp3" type="audio/mpeg">
    </audio>
  </div>

  <script>
  (function(){
    /* snow (lightweight) */
    (function(){
      const root = document.querySelector('.snowfall');
      if(!root) return;
      const flakes = 22;
      for(let i=0;i<flakes;i++){
        const f = document.createElement('span');
        f.className = 'snowflake-anim';
        f.textContent = ['‚ùÑ','‚ùÖ','‚ùÜ'][Math.floor(Math.random()*3)];
        f.style.left = (Math.random()*100)+'vw';
        f.style.fontSize = (0.8 + Math.random()*1.2)+'rem';
        f.style.animation = `fall ${8 + Math.random()*12}s linear ${-Math.random()*10}s infinite`;
        root.appendChild(f);
      }
      const s = document.createElement('style');
      s.textContent = '@keyframes fall{0%{transform:translateY(-15vh)}100%{transform:translateY(120vh)}}';
      document.head.appendChild(s);
    })();

    /* countdowns */
    function updateCountdowns(){
      document.querySelectorAll('.countdown').forEach(cd=>{
        const dateStr = cd.dataset.date;
        if(!dateStr) return;
        const diff = new Date(dateStr) - new Date();
        if(diff <= 0){ cd.textContent = 'Event started!'; return; }
        const d = Math.floor(diff/86400000);
        const h = Math.floor((diff%86400000)/3600000);
        const m = Math.floor((diff%3600000)/60000);
        const s = Math.floor((diff%60000)/1000);
        cd.textContent = `Starts in ${d}d ${h}h ${m}m ${s}s`;
      });
    }
    setInterval(updateCountdowns,1000);
    updateCountdowns();

    /* RSVP storage and UI */
    const RSVPS_KEY = 'winter_rsvps_v1';
    function readStore(){ try{return JSON.parse(localStorage.getItem(RSVPS_KEY)||'{}')}catch(e){return{}} }
    function writeStore(v){ try{ localStorage.setItem(RSVPS_KEY, JSON.stringify(v)); }catch(e){} }
    function refreshRSVPUI(){
      const store = readStore();
      document.querySelectorAll('.event-card').forEach(card=>{
        const r = card.querySelector('.rsvp-btn');
        const rem = card.querySelector('.remove-btn');
        if(!r || !rem) return;
        const ev = r.dataset.event;
        const has = !!(store[ev] && store[ev].length);
        r.style.display = has ? 'none' : '';
        rem.style.display = has ? 'inline-block' : 'none';
        card.style.boxShadow = has ? '0 24px 60px rgba(207,183,107,0.06)' : '';
      });
    }

    document.addEventListener('click', function(e){
      const r = e.target.closest('.rsvp-btn');
      if(r){
        const ev = r.dataset.event;
        const name = prompt('Name to RSVP:'); if(!name) return;
        const email = prompt('Email (optional):') || '';
        const s = readStore(); s[ev] = s[ev] || []; s[ev].push({name:name.trim(), email:email.trim(), time:new Date().toISOString()});
        writeStore(s); refreshRSVPUI(); alert('Thanks ‚Äî RSVP recorded.'); return;
      }
      const rem = e.target.closest('.remove-btn');
      if(rem){
        const card = rem.closest('.event-card'); if(!card) return;
        const rbtn = card.querySelector('.rsvp-btn'); if(!rbtn) return;
        const ev = rbtn.dataset.event; const s = readStore(); delete s[ev]; writeStore(s); refreshRSVPUI(); return;
      }
    }, {passive:true});
    refreshRSVPUI();

    /* music play/pause with accessible labels */
    (function(){
      const btn = document.getElementById('musicToggle');
      const audio = document.getElementById('bgMusic');
      let playing = false;
      if(audio){ audio.volume = 0.5; audio.playsInline = true; audio.preload = 'none'; }
      function setState(p){
        playing = !!p;
        if(btn){
          btn.textContent = playing ? '‚è∏ Pause' : '‚ñ∂ Play';
          btn.setAttribute('aria-pressed', String(playing));
          btn.setAttribute('aria-label', playing ? 'Pause winter melody' : 'Play winter melody');
        }
      }
      async function start(){
        if(!audio) return;
        try{ await audio.play(); setState(true); } catch(err){
          // require explicit gesture: attach one-time resume
          const resume = async ()=>{ try{ await audio.play(); setState(true); }catch{} document.body.removeEventListener('click', resume); document.body.removeEventListener('touchstart', resume); };
          document.body.addEventListener('click', resume, {once:true});
          document.body.addEventListener('touchstart', resume, {once:true});
          alert('Tap once anywhere on the page to enable audio playback.');
        }
      }
      function pause(){ if(!audio) return; audio.pause(); setState(false); }

      if(btn) btn.addEventListener('click', function(){ playing ? pause() : start(); }, {passive:true});
      if(audio){ audio.addEventListener('play', ()=> setState(true)); audio.addEventListener('pause', ()=> setState(false)); }
      setState(false);
    })();

    /* footer year */
    const fy = document.getElementById('footer-year'); if(fy) fy.textContent = new Date().getFullYear();

  })();
  </script>
  <footer class="site-foot" aria-hidden="false">
  <div>Questions? <a href="mailto:info@winterhall.example" style="color:var(--accent)">info@winterhall.example</a></div>
  <div class="small">¬© Winter Wonderland</div>
  <div class="small" style="margin-top:6px;color:var(--muted);font-style:italic">
    This event is imaginary ‚Äî created to lift someone's mood and for entertainment only.
  </div>
</footer>
</body>
</html>